import{_ as $}from"./AppLayout-ad3d542d.js";import{C as S,A as y,p as v,a as D,P as C}from"./index-0bee122f.js";import{o,f as c,b as t,g as b,v as g,F as k,r as P,t as s,c as E,h as u,i as l,j as T,d as p,w as L}from"./app-3f896bec.js";import{_ as h}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-335f8b63.js";import"./vue.runtime.esm-bundler-5fa238d2.js";import"./open-closed-f1df1f8f.js";import"./use-event-listener-608bd015.js";import"./use-resolve-button-type-4f1ad198.js";S.register(y,v,D);const w={name:"EmailStats",props:[""],components:{Pie:C},data:()=>({isLoading:!0,chartData:{},options:{responsive:!0,plugins:{tooltip:{backgroundColor:"#41B883"}}},emailType:"",timePeriod:"",timePeriodOptions:[]}),watch:{emailType(){this.getEmailStats()},timePeriod(){this.getEmailStats()}},methods:{getEmailStats(){axios.get(`/api/email-stats?type=${this.emailType}&date=${this.timePeriod}`).then(e=>{e.data.emailStats?this.chartData={labels:["Total Emails Sent","Total Opens","Total Clicks"],datasets:[{backgroundColor:["#22c55e","#FF4929","#f7b515"],data:Object.values(e.data.emailStats)}]}:this.chartData=null,this.isLoading=!1}).catch(e=>{this.isLoading=!1})},getLast12Months(){for(let e=0;e<12;e++){let a=new Date;a.setMonth(a.getMonth()-e);const n=a.toLocaleString("en-US",{month:"long",year:"numeric"}),d=a.toISOString();this.timePeriodOptions.push({key:n,value:d})}}},beforeMount(){this.getLast12Months(),this.getEmailStats()}},O={key:0,class:"flex flex-wrap p-8 justify-between gap-20"},R={class:"flex flex-col gap-4 text-xl"},x=t("h2",{class:"text-3xl font-medium"}," Email Statistics ",-1),F={class:"flex items-center gap-4"},A=t("label",{class:"w-[200px]",for:"time"},"Email Type:",-1),M=T('<option value="">All Emails</option><option value="referrer_created">Referrer Created</option><option value="eligibility_email_1">Eligibility Email 1</option><option value="eligibility_email_2">Eligibility Email 2</option><option value="eligibility_email_3">Eligibility Email 3</option><option value="eligibility_email_4">Eligibility Email 4</option><option value="nurture_cycle_email_1">Nurture Cycle Email 1</option><option value="nurture_cycle_email_2">Nurture Cycle Email 2</option><option value="nurture_cycle_email_3">Nurture Cycle Email 3</option>',9),N=[M],U={class:"flex items-center gap-4"},V=t("label",{class:"w-[200px]",for:"time"},"Time Period:",-1),j=t("option",{value:""},"All Time",-1),B=["value"],I={class:""},Y={class:""},q={class:""},z={class:"h-[300px] flex items-center"};function G(e,a,n,d,f,_){const r=l("Pie");return e.isLoading?u("",!0):(o(),c("div",O,[t("div",R,[x,t("div",F,[A,b(t("select",{class:"rounded-lg w-[200px] text-[#000000]",name:"type","onUpdate:modelValue":a[0]||(a[0]=i=>e.emailType=i)},N,512),[[g,e.emailType]])]),t("div",U,[V,b(t("select",{class:"rounded-lg w-[200px] text-[#000000]",name:"time","onUpdate:modelValue":a[1]||(a[1]=i=>e.timePeriod=i)},[j,(o(!0),c(k,null,P(e.timePeriodOptions,(i,m)=>(o(),c("option",{key:m,value:i.value},s(i.key),9,B))),128))],512),[[g,e.timePeriod]])]),t("h3",I," Total Emails Sent: "+s(e.chartData?e.chartData.datasets[0].data[0]:0),1),t("h3",Y," Total Clicks: "+s(e.chartData?e.chartData.datasets[0].data[1]:0),1),t("h3",q," Total Opens: "+s(e.chartData?e.chartData.datasets[0].data[2]:0),1)]),t("div",z,[e.chartData?(o(),E(r,{key:0,data:e.chartData,options:e.options,ref:"pie"},null,8,["data","options"])):u("",!0)])]))}const H=h(w,[["render",G]]);S.register(y,v,D);const J={name:"SubscribedStats",props:[""],components:{Pie:C},data:()=>({isLoading:!0,referrerChartData:{},referredChartData:{},referrerOptions:{responsive:!0},referredOptions:{responsive:!0}}),methods:{getSubscribedData(){axios.get("/api/subscribed-stats").then(e=>{this.referrerChartData={labels:["Subscribed Referrers","Unsubscribed Referrers"],datasets:[{backgroundColor:["#22c55e","#FF4929"],data:Object.values(e.data.referrerSubscribed)}]},this.referredChartData={labels:["Subscribed Referreds","Unsubscribed Referreds"],datasets:[{backgroundColor:["#22c55e","#FF4929"],data:Object.values(e.data.referredSubscribed)}]},this.isLoading=!1}).catch(e=>{this.isLoading=!1})}},beforeMount(){this.getSubscribedData()}},K={key:0,class:"grid grid-cols-3 p-8"},Q={class:"flex flex-col gap-4 text-xl"},W=t("h2",{class:"text-3xl font-medium"}," Subscribed Statistics ",-1),X={class:""},Z={class:""},ee={class:""},te={class:""},ae={class:""},se={class:""},ie={class:"h-[300px] mx-auto"},re={class:"h-[300px] mx-auto"};function oe(e,a,n,d,f,_){const r=l("Pie");return e.isLoading?u("",!0):(o(),c("div",K,[t("div",Q,[W,t("h3",X," Total Referrers: "+s(e.referrerChartData.datasets[0].data[0]+e.referrerChartData.datasets[0].data[1]),1),t("p",Z," Subscribed Referrers: "+s(e.referrerChartData.datasets[0].data[0]),1),t("p",ee," Unsubscribed Referrers: "+s(e.referrerChartData.datasets[0].data[1]),1),t("h3",te," Total Referreds: "+s(e.referredChartData.datasets[0].data[0]+e.referredChartData.datasets[0].data[1]),1),t("p",ae," Subscribed Referreds: "+s(e.referredChartData.datasets[0].data[0]),1),t("p",se," Unsubscribed Referreds: "+s(e.referredChartData.datasets[0].data[1]),1)]),t("div",ie,[p(r,{data:e.referrerChartData,options:e.referrerOptions,ref:"pieReferrer"},null,8,["data","options"])]),t("div",re,[p(r,{data:e.referredChartData,options:e.referredOptions,ref:"pieReferred"},null,8,["data","options"])])]))}const le=h(J,[["render",oe]]),ne={components:{AppLayout:$,EmailStats:H,SubscribedStats:le}},de={class:"mx-auto divide-y divide-grey-dark text-white",style:{"max-width":"1200px"}};function ce(e,a,n,d,f,_){const r=l("EmailStats"),i=l("SubscribedStats"),m=l("AppLayout");return o(),E(m,null,{default:L(()=>[t("div",de,[p(r),p(i)])]),_:1})}const ye=h(ne,[["render",ce]]);export{ye as default};
