import{_ as E}from"./AppLayout-c50ac00a.js";import{C as y,A as S,p as v,a as D,P as C}from"./index-d4b3c287.js";import{o,f as c,b as t,g as b,v as g,F as k,r as P,t as a,c as $,h as u,i as n,j as T,d as p,w as L}from"./app-4d9f2a41.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-6f35e88d.js";import"./vue.runtime.esm-bundler-210605f2.js";import"./open-closed-eccb28d1.js";import"./use-event-listener-ee83c151.js";import"./use-resolve-button-type-f321b5a2.js";y.register(S,v,D);const O={name:"EmailStats",props:[""],components:{Pie:C},data:()=>({isLoading:!0,chartData:{},options:{responsive:!0,plugins:{tooltip:{backgroundColor:"#41B883"}}},emailType:"",timePeriod:"",timePeriodOptions:[]}),watch:{emailType(){this.getEmailStats()},timePeriod(){this.getEmailStats()}},methods:{getEmailStats(){axios.get(`/api/email-stats?type=${this.emailType}&date=${this.timePeriod}`).then(e=>{e.data.emailStats?this.chartData={labels:["Total Emails Sent","Total Opens","Total Clicks","Unique Opens","Unique Clicks"],datasets:[{backgroundColor:["#22c55e","#FF4929","#f7b515"],data:Object.values(e.data.emailStats)}]}:this.chartData=null,this.isLoading=!1}).catch(e=>{this.isLoading=!1})},getLast12Months(){for(let e=0;e<12;e++){let s=new Date;s.setMonth(s.getMonth()-e);const l=s.toLocaleString("en-US",{month:"long",year:"numeric"}),d=s.toISOString();this.timePeriodOptions.push({key:l,value:d})}}},beforeMount(){this.getLast12Months(),this.getEmailStats()}},R={key:0,class:"flex flex-wrap p-8 justify-between gap-20"},w={class:"flex flex-col gap-4 text-xl"},U=t("h2",{class:"text-3xl font-medium"}," Email Statistics ",-1),F={class:"flex items-center gap-4"},x=t("label",{class:"w-[200px]",for:"time"},"Email Type:",-1),A=T('<option value="">All Emails</option><option value="referrer_created">Referrer Created</option><option value="eligibility_email_1">Eligibility Email 1</option><option value="eligibility_email_2">Eligibility Email 2</option><option value="eligibility_email_3">Eligibility Email 3</option><option value="eligibility_email_4">Eligibility Email 4</option><option value="nurture_cycle_email_1">Nurture Cycle Email 1</option><option value="nurture_cycle_email_2">Nurture Cycle Email 2</option><option value="nurture_cycle_email_3">Nurture Cycle Email 3</option>',9),M=[A],N={class:"flex items-center gap-4"},V=t("label",{class:"w-[200px]",for:"time"},"Time Period:",-1),j=t("option",{value:""},"All Time",-1),B=["value"],q={class:""},I={class:""},Y={class:""},z={class:""},G={class:""},H={class:"h-[300px] flex items-center"};function J(e,s,l,d,f,_){const r=n("Pie");return e.isLoading?u("",!0):(o(),c("div",R,[t("div",w,[U,t("div",F,[x,b(t("select",{class:"rounded-lg w-[200px] text-[#000000]",name:"type","onUpdate:modelValue":s[0]||(s[0]=i=>e.emailType=i)},M,512),[[g,e.emailType]])]),t("div",N,[V,b(t("select",{class:"rounded-lg w-[200px] text-[#000000]",name:"time","onUpdate:modelValue":s[1]||(s[1]=i=>e.timePeriod=i)},[j,(o(!0),c(k,null,P(e.timePeriodOptions,(i,h)=>(o(),c("option",{key:h,value:i.value},a(i.key),9,B))),128))],512),[[g,e.timePeriod]])]),t("h3",q," Total Recipients: "+a(e.chartData?e.chartData.datasets[0].data[0]:0),1),t("h3",I," Unique Opens: "+a(e.chartData?e.chartData.datasets[0].data[1]:0),1),t("h3",Y," Unique Clicks: "+a(e.chartData?e.chartData.datasets[0].data[2]:0),1),t("h3",z," Total Opens: "+a(e.chartData?e.chartData.datasets[0].data[3]:0),1),t("h3",G," Total Clicks: "+a(e.chartData?e.chartData.datasets[0].data[4]:0),1)]),t("div",H,[e.chartData?(o(),$(r,{key:0,data:e.chartData,options:e.options,ref:"pie"},null,8,["data","options"])):u("",!0)])]))}const K=m(O,[["render",J]]);y.register(S,v,D);const Q={name:"SubscribedStats",props:[""],components:{Pie:C},data:()=>({isLoading:!0,referrerChartData:{},referredChartData:{},referrerOptions:{responsive:!0},referredOptions:{responsive:!0}}),methods:{getSubscribedData(){axios.get("/api/subscribed-stats").then(e=>{this.referrerChartData={labels:["Subscribed Referrers","Unsubscribed Referrers"],datasets:[{backgroundColor:["#22c55e","#FF4929"],data:Object.values(e.data.referrerSubscribed)}]},this.referredChartData={labels:["Subscribed Referreds","Unsubscribed Referreds"],datasets:[{backgroundColor:["#22c55e","#FF4929"],data:Object.values(e.data.referredSubscribed)}]},this.isLoading=!1}).catch(e=>{this.isLoading=!1})}},beforeMount(){this.getSubscribedData()}},W={key:0,class:"grid grid-cols-3 p-8"},X={class:"flex flex-col gap-4 text-xl"},Z=t("h2",{class:"text-3xl font-medium"}," Subscribed Statistics ",-1),ee={class:""},te={class:""},ae={class:""},se={class:""},ie={class:""},re={class:""},oe={class:"h-[300px] mx-auto"},ne={class:"h-[300px] mx-auto"};function le(e,s,l,d,f,_){const r=n("Pie");return e.isLoading?u("",!0):(o(),c("div",W,[t("div",X,[Z,t("h3",ee," Total Referrers: "+a(e.referrerChartData.datasets[0].data[0]+e.referrerChartData.datasets[0].data[1]),1),t("p",te," Subscribed Referrers: "+a(e.referrerChartData.datasets[0].data[0]),1),t("p",ae," Unsubscribed Referrers: "+a(e.referrerChartData.datasets[0].data[1]),1),t("h3",se," Total Referreds: "+a(e.referredChartData.datasets[0].data[0]+e.referredChartData.datasets[0].data[1]),1),t("p",ie," Subscribed Referreds: "+a(e.referredChartData.datasets[0].data[0]),1),t("p",re," Unsubscribed Referreds: "+a(e.referredChartData.datasets[0].data[1]),1)]),t("div",oe,[p(r,{data:e.referrerChartData,options:e.referrerOptions,ref:"pieReferrer"},null,8,["data","options"])]),t("div",ne,[p(r,{data:e.referredChartData,options:e.referredOptions,ref:"pieReferred"},null,8,["data","options"])])]))}const de=m(Q,[["render",le]]),ce={components:{AppLayout:E,EmailStats:K,SubscribedStats:de}},pe={class:"mx-auto divide-y divide-grey-dark text-white",style:{"max-width":"1200px"}};function he(e,s,l,d,f,_){const r=n("EmailStats"),i=n("SubscribedStats"),h=n("AppLayout");return o(),$(h,null,{default:L(()=>[t("div",pe,[p(r),p(i)])]),_:1})}const De=m(ce,[["render",he]]);export{De as default};
